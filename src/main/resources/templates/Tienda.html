<!DOCTYPE html>
<html lang="es" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda en línea</title>

    <!-- Agrega los enlaces a Bootstrap CSS y JS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">


</head>
<body>

<div class="row mt-2">
    <div class="bg-secondary py-3">
        <div class="container my-3">
            <div class="text-center text-white">
                <h1 class="display-4 fw-bolder">Compra con estilo </h1>
                <p class="lead fw-normal text-white-50 mb-0">With this shop hompeage template</p>
            </div>
        </div>
    </div>

    <div class="py-2">
        <div class="container px-2 px-lg-2 mt-5">
            <div id="catalogo-productos" class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">

            </div>
        </div>
    </div>

</div>


<section>

    <div class="container-fluid px-5 my-5">
        <div class="row">
            <div class="col-sm-3">
                <div class="row-mb-3">
                    <div class="col-sm-12">
                        <div class="card">
                            <div class="card-header bg-dark text-white">
                                Marcas
                            </div>
                            <div id="contenedor_categoria" class="card-body">
								<form>
									
									<!-- Agregar una opción para "Todos" -->
								        <div class="form-check">
								            <input class="form-check-input" type="radio" id="flexRadioDefaultTodos" value="todos" name="marcaSeleccionada" checked>
								            <label class="form-check-label" for="flexRadioDefaultTodos">Todos</label>
								        </div>
									        <!-- Iterar por las demás opciones de marca -->
					                <div th:each="marca : ${lstMarcaporEstado}">
					                    <div class="form-check">
					                        <input class="form-check-input" type="radio" th:id="${'flexRadioDefault' + marca.codigo}" th:value="${marca.codigo}" name="marcaSeleccionada">
					                        <label class="form-check-label" th:for="${'flexRadioDefault' + marca.codigo}" th:text="${marca.descripcion}"></label>
					                    </div>
					                </div>
					            </form>
                            </div>
                        </div>

                    </div>
                </div>
                <br />
                <div class="row-mb-3">
                    <div class="col-sm-12">
                        <div class="d-grid gap-2">
                            <button id="btnaplicarfiltro" class="btn btn-outline-dark btn-block" type="button">
                                <i class="fas fa-filter"></i>Aplicar Filtros
                            </button>
                        </div>
                    </div>


                </div>
            </div>


            <!--para las img de los productos-->
							<div class="col-sm-9">
				    <div id="contenedor_producto" class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
				        <div th:each="producto : ${lstProductoporEstado}" data-marca="${producto.marca}">
				            <div class="col text-center">
				                <div class="card">
									<br>
				                    <img alt="" th:src="'data:image/jpeg;base64,' + ${producto.foto}" class="card-img-top mx-auto" style="width:150px; height:150px;">
				                    <div class="card-body">
				                        <h5 class="card-title" th:text="${producto.nomProducto}"></h5>
				                        <p class="card-text" th:text="${producto.precioPro}"></p>
				                        
				                        <!-- Botón para Agregar al carrito -->
				                        <a  class="btn btn-primary" >Agregar al carrito</a>
				                        
				                        <!-- Botón para Ver detalle
				                        <a  class="btn btn-secondary">Ver detalle</a> -->
				                        <a th:href="'/detalle/' + ${producto.idproducto}" class="btn btn-secondary" data-bs-target="#detalleProductoModal" >Ver detalle</a>

				                    </div>
				                </div>
				            </div>
				        </div>
				    </div>
				</div>



        </div>


    </div>

</section>



<script src="https://code.jquery.com/jquery-3.7.1.min.js" ></script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" ></script>




<!-- Script para abrir el modal al hacer clic en el enlace "Ver detalle" -->
<script>
$(document).ready(function() {
    // Escuchar el clic en el enlace "Ver detalle"
    $(".btndetalle").click(function(e) {
       // e.preventDefault(); // Evitar la navegación a la página "/detalle/{idproducto}"

        // Abrir el modal
        $("#detalleProductoModal").modal("show");
    });
});
</script>


<script>
document.addEventListener("DOMContentLoaded", function () {
    const filterButton = document.getElementById("btnaplicarfiltro");
    const products = document.querySelectorAll(".col.text-center");

    filterButton.addEventListener("click", function () {
        const selectedMarca = document.querySelector("input[name='marcaSeleccionada']:checked").value;

        products.forEach(function (product) {
            const productMarca = product.getAttribute("data-marca"); // Obtén la marca del producto
            if (selectedMarca === "todos" || selectedMarca === productMarca) {
                product.style.display = "block"; // Muestra el producto
            } else {
                product.style.display = "none"; // Oculta el producto
            }
        });
    });
});
</script>








</body>
</html>
